<template>
  <MainWrapperVue :_class="'container standalone-component'">
    <div class="w-100 pt-3 pb-2 d-lg-block-d-md-block d-sm-none"></div>
    <div class="bg-white standalone-main d-flex flex-column align-items-center pt-3 pb-3">
      <div class="bg-black">
          <CreditCardVue :ccNumber="formModel.ccNumber" :ccName="formModel.ccName" :ccExpiry="formModel.ccExpiry" :ccCVV="formModel.ccCVV" :height="300" :protectNumber="false"/>
    </div>
      <PaymentForm @successFullSubmit="successHandle">
        <TextInputVue  :id="'finance-ccname-input'" :_class="'form-wrapped-input'" :name="'finance-input-ccName'" :placeholder="'John Maker'" :label="'Cardholder name'" :_required="true" :maxLength="22" @input_keyUp="inputHandle"/>
        <TextInputVue  :id="'finance-cardnumber-input'" :_class="'form-wrapped-input'" :name="'finance-input-ccNumber'" :placeholder="'XXXX XXXX XXXX XXXX'" :label="'Card Number'" :_required="true" :maxLength="16" :minLength="16" @input_keyUp="inputHandle" :validate_type="'card_number'" :restrictTo="'numbers'"/>
        <div class="row g-3">
          <div class="col-lg-5 col-md-6 col-sm-12">
            <TextInputVue  :id="'finance-expirydate-input'" :_class="'form-wrapped-input'" :name="'finance-input-ccExpiry'" :placeholder="'MM / YYYY'" :label="'Expiry Date'" :_required="true" @input_keyUp="inputHandle" validate_type="exp_date" restrictTo="date-year" :maxLength="9" :minLength="9"/>
          </div>
          <div class="col-lg-5 col-md-6 col-sm-12">
            <TextInputVue  :id="'finance-cvc-input'" :_class="'form-wrapped-input'" :name="'finance-input-ccCVV'" :placeholder="'123'" :label="'CVC'" :_required="true" @input_keyUp="inputHandle" :maxLength="3" restrictTo="numbers"/>
          </div>
        </div>
        <CheckboxInputVueVue @input_changed="inputHandle" :_id="'finance-default-input'" :name="'finance-input-ccDefault'" :label="'Save this as your default payment'"/>
        <DarkButtonVue :text="'Add Payment Method'" :type="'submit'"/>
        <div class="w-100 d-flex justify-content-between align-items-center mt-5">
        <BackButton/>
        <div>
          <svg width="155" height="25" viewBox="0 0 155 25" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.25 9.5H16.5V5.75C16.5 4.55653 16.0259 3.41193 15.182 2.56802C14.3381 1.72411 13.1935 1.25 12 1.25C10.8065 1.25 9.66193 1.72411 8.81802 2.56802C7.97411 3.41193 7.5 4.55653 7.5 5.75V9.5H6.75C5.95462 9.50087 5.19206 9.81722 4.62964 10.3796C4.06722 10.9421 3.75087 11.7046 3.75 12.5V20.75C3.75087 21.5454 4.06722 22.3079 4.62964 22.8704C5.19206 23.4328 5.95462 23.7491 6.75 23.75H17.25C18.0454 23.7491 18.8079 23.4328 19.3704 22.8704C19.9328 22.3079 20.2491 21.5454 20.25 20.75V12.5C20.2491 11.7046 19.9328 10.9421 19.3704 10.3796C18.8079 9.81722 18.0454 9.50087 17.25 9.5ZM15 9.5H9V5.75C9 4.95435 9.31607 4.19129 9.87868 3.62868C10.4413 3.06607 11.2044 2.75 12 2.75C12.7956 2.75 13.5587 3.06607 14.1213 3.62868C14.6839 4.19129 15 4.95435 15 5.75V9.5Z" fill="#02D693"/>
<path d="M36.48 18.224C36.016 18.224 35.552 18.1893 35.088 18.12C34.624 18.0507 34.1947 17.9627 33.8 17.856C33.4053 17.744 33.0773 17.6267 32.816 17.504L33.024 15.888C33.312 16.0267 33.6587 16.1707 34.064 16.32C34.4747 16.4693 34.9173 16.5947 35.392 16.696C35.8667 16.7973 36.3467 16.848 36.832 16.848C37.552 16.848 38.1227 16.7173 38.544 16.456C38.9707 16.1893 39.184 15.776 39.184 15.216C39.184 14.7947 39.0773 14.4507 38.864 14.184C38.6507 13.912 38.328 13.68 37.896 13.488C37.4693 13.296 36.9333 13.104 36.288 12.912C35.6747 12.7307 35.1093 12.5173 34.592 12.272C34.0747 12.0213 33.6587 11.688 33.344 11.272C33.0347 10.8507 32.88 10.2933 32.88 9.6C32.88 9.008 33.032 8.48533 33.336 8.032C33.6453 7.57333 34.096 7.216 34.688 6.96C35.2853 6.704 36.016 6.576 36.88 6.576C37.616 6.576 38.2907 6.656 38.904 6.816C39.5227 6.976 40.032 7.152 40.432 7.344L40.272 8.96C39.664 8.59733 39.0827 8.33867 38.528 8.184C37.9787 8.02933 37.408 7.952 36.816 7.952C36.16 7.952 35.616 8.07467 35.184 8.32C34.7573 8.56533 34.544 8.96533 34.544 9.52C34.544 9.89333 34.64 10.2 34.832 10.44C35.024 10.6747 35.3093 10.8773 35.688 11.048C36.0667 11.2133 36.5387 11.3813 37.104 11.552C37.8827 11.7867 38.552 12.056 39.112 12.36C39.672 12.6587 40.1013 13.0293 40.4 13.472C40.6987 13.9093 40.848 14.4533 40.848 15.104C40.848 15.584 40.7573 16.016 40.576 16.4C40.3947 16.784 40.1227 17.112 39.76 17.384C39.3973 17.656 38.9413 17.864 38.392 18.008C37.848 18.152 37.2107 18.224 36.48 18.224ZM45.7598 18.16C44.8371 18.16 44.0611 17.9707 43.4318 17.592C42.8024 17.2133 42.3251 16.712 41.9998 16.088C41.6798 15.4587 41.5198 14.768 41.5198 14.016C41.5198 13.2853 41.6691 12.616 41.9678 12.008C42.2718 11.4 42.7091 10.9147 43.2798 10.552C43.8558 10.184 44.5491 10 45.3598 10C46.0104 10 46.5891 10.1307 47.0958 10.392C47.6078 10.648 48.0078 11.024 48.2958 11.52C48.5891 12.0107 48.7358 12.608 48.7358 13.312C48.7358 13.424 48.7304 13.5467 48.7198 13.68C48.7144 13.808 48.6984 13.9413 48.6718 14.08H42.9918C43.0611 14.8053 43.2344 15.3707 43.5118 15.776C43.7891 16.1813 44.1384 16.4667 44.5598 16.632C44.9811 16.7973 45.4398 16.88 45.9358 16.88C46.2984 16.88 46.6771 16.8427 47.0718 16.768C47.4664 16.6933 47.8398 16.576 48.1918 16.416L48.3838 17.552C48.0798 17.6853 47.7091 17.8213 47.2718 17.96C46.8344 18.0933 46.3304 18.16 45.7598 18.16ZM43.1198 13.088H47.2478C47.2478 12.72 47.1784 12.4 47.0398 12.128C46.9011 11.856 46.6904 11.648 46.4078 11.504C46.1251 11.3547 45.7651 11.28 45.3278 11.28C44.6878 11.28 44.1944 11.44 43.8478 11.76C43.5064 12.0747 43.2638 12.5173 43.1198 13.088ZM53.4673 18.16C52.5819 18.16 51.8379 17.9813 51.2353 17.624C50.6379 17.2613 50.1846 16.776 49.8753 16.168C49.5713 15.5547 49.4193 14.8747 49.4193 14.128C49.4193 13.3493 49.5659 12.648 49.8593 12.024C50.1579 11.4 50.6139 10.9067 51.2273 10.544C51.8406 10.1813 52.6246 10 53.5793 10C53.9899 10 54.3766 10.0427 54.7393 10.128C55.1073 10.208 55.4353 10.32 55.7233 10.464L55.4993 11.728C55.2059 11.5893 54.8939 11.48 54.5633 11.4C54.2379 11.32 53.8993 11.28 53.5473 11.28C52.6833 11.28 52.0246 11.5253 51.5713 12.016C51.1179 12.5067 50.8913 13.1893 50.8913 14.064C50.8913 14.9173 51.1073 15.6027 51.5393 16.12C51.9713 16.6373 52.6299 16.896 53.5153 16.896C53.8779 16.896 54.2246 16.8533 54.5553 16.768C54.8913 16.6827 55.2113 16.5653 55.5153 16.416L55.7073 17.568C55.4939 17.7173 55.1819 17.8533 54.7713 17.976C54.3606 18.0987 53.9259 18.16 53.4673 18.16ZM59.6289 18.16C59.0155 18.16 58.4929 18.0373 58.0609 17.792C57.6289 17.5413 57.2982 17.1627 57.0689 16.656C56.8449 16.1493 56.7329 15.504 56.7329 14.72V10.16H58.1729V14.32C58.1729 15.152 58.3142 15.7867 58.5969 16.224C58.8849 16.6613 59.3515 16.88 59.9969 16.88C60.4395 16.88 60.8502 16.7733 61.2289 16.56C61.6075 16.3467 61.8689 16.0053 62.0129 15.536L61.8049 16.32V10.16H63.2449V18H61.9649L61.6769 16.464L62.0609 16.72C61.7995 17.2053 61.4795 17.568 61.1009 17.808C60.7275 18.0427 60.2369 18.16 59.6289 18.16ZM64.8835 18V10.16H66.0675L66.2435 11.456C66.6435 10.96 67.0248 10.5947 67.3875 10.36C67.7555 10.12 68.1475 10 68.5635 10C68.6968 10 68.8195 10.016 68.9315 10.048L68.7875 11.632C68.7182 11.616 68.6435 11.6053 68.5635 11.6C68.4888 11.5893 68.4035 11.584 68.3075 11.584C67.8915 11.584 67.5075 11.6773 67.1555 11.864C66.8088 12.0453 66.5635 12.2453 66.4195 12.464V18H64.8835ZM73.1829 18.16C72.2602 18.16 71.4842 17.9707 70.8549 17.592C70.2255 17.2133 69.7482 16.712 69.4229 16.088C69.1029 15.4587 68.9429 14.768 68.9429 14.016C68.9429 13.2853 69.0922 12.616 69.3909 12.008C69.6949 11.4 70.1322 10.9147 70.7029 10.552C71.2789 10.184 71.9722 10 72.7829 10C73.4335 10 74.0122 10.1307 74.5189 10.392C75.0309 10.648 75.4309 11.024 75.7189 11.52C76.0122 12.0107 76.1589 12.608 76.1589 13.312C76.1589 13.424 76.1535 13.5467 76.1429 13.68C76.1375 13.808 76.1215 13.9413 76.0949 14.08H70.4149C70.4842 14.8053 70.6575 15.3707 70.9349 15.776C71.2122 16.1813 71.5615 16.4667 71.9829 16.632C72.4042 16.7973 72.8629 16.88 73.3589 16.88C73.7215 16.88 74.1002 16.8427 74.4949 16.768C74.8895 16.6933 75.2629 16.576 75.6149 16.416L75.8069 17.552C75.5029 17.6853 75.1322 17.8213 74.6949 17.96C74.2575 18.0933 73.7535 18.16 73.1829 18.16ZM70.5429 13.088H74.6709C74.6709 12.72 74.6015 12.4 74.4629 12.128C74.3242 11.856 74.1135 11.648 73.8309 11.504C73.5482 11.3547 73.1882 11.28 72.7509 11.28C72.1109 11.28 71.6175 11.44 71.2709 11.76C70.9295 12.0747 70.6869 12.5173 70.5429 13.088ZM85.8601 18.224C84.7721 18.224 83.8015 17.9867 82.9481 17.512C82.1001 17.032 81.4308 16.3573 80.9401 15.488C80.4548 14.6133 80.2121 13.584 80.2121 12.4C80.2121 11.216 80.4575 10.1893 80.9481 9.32C81.4441 8.44533 82.1215 7.77067 82.9801 7.296C83.8441 6.816 84.8255 6.576 85.9241 6.576C86.4948 6.576 87.0388 6.63733 87.5561 6.76C88.0735 6.88267 88.5268 7.04 88.9161 7.232L88.7561 8.64C88.3561 8.448 87.9161 8.28533 87.4361 8.152C86.9561 8.01867 86.4468 7.952 85.9081 7.952C85.0281 7.952 84.2895 8.152 83.6921 8.552C83.0948 8.94667 82.6415 9.48 82.3321 10.152C82.0281 10.824 81.8761 11.5733 81.8761 12.4C81.8761 13.2267 82.0255 13.976 82.3241 14.648C82.6281 15.32 83.0761 15.856 83.6681 16.256C84.2655 16.6507 85.0015 16.848 85.8761 16.848C86.4308 16.848 86.9428 16.7893 87.4121 16.672C87.8868 16.5493 88.3348 16.384 88.7561 16.176L88.9161 17.584C88.5161 17.7653 88.0655 17.9173 87.5641 18.04C87.0628 18.1627 86.4948 18.224 85.8601 18.224ZM93.3087 18.16C92.4874 18.16 91.7861 17.9787 91.2047 17.616C90.6287 17.248 90.1861 16.7573 89.8767 16.144C89.5727 15.5253 89.4207 14.8373 89.4207 14.08C89.4207 13.3227 89.5727 12.6373 89.8767 12.024C90.1861 11.4053 90.6287 10.9147 91.2047 10.552C91.7861 10.184 92.4874 10 93.3087 10C94.1247 10 94.8234 10.184 95.4047 10.552C95.9861 10.9147 96.4287 11.4053 96.7327 12.024C97.0421 12.6373 97.1967 13.3227 97.1967 14.08C97.1967 14.8373 97.0421 15.5253 96.7327 16.144C96.4287 16.7573 95.9861 17.248 95.4047 17.616C94.8234 17.9787 94.1247 18.16 93.3087 18.16ZM93.3087 16.88C94.0874 16.88 94.6847 16.6347 95.1007 16.144C95.5167 15.648 95.7247 14.96 95.7247 14.08C95.7247 13.2 95.5167 12.5147 95.1007 12.024C94.6847 11.528 94.0874 11.28 93.3087 11.28C92.5354 11.28 91.9381 11.528 91.5167 12.024C91.1007 12.5147 90.8927 13.2 90.8927 14.08C90.8927 14.96 91.1007 15.648 91.5167 16.144C91.9381 16.6347 92.5354 16.88 93.3087 16.88ZM98.3616 18V10.16H99.4816L99.7696 11.664L99.2096 11.424C99.7376 10.8373 100.252 10.4533 100.754 10.272C101.26 10.0907 101.754 10 102.234 10C103.38 10 104.199 10.3307 104.69 10.992C105.186 11.6533 105.434 12.5493 105.434 13.68V18H103.994V13.68C103.994 12.848 103.839 12.24 103.53 11.856C103.22 11.472 102.692 11.28 101.946 11.28C101.418 11.28 100.932 11.3973 100.49 11.632C100.052 11.8613 99.7643 12.2293 99.6256 12.736L99.8016 11.856V18H98.3616ZM106.979 18V10.16H108.099L108.387 11.664L107.827 11.424C108.355 10.8373 108.87 10.4533 109.371 10.272C109.878 10.0907 110.371 10 110.851 10C111.998 10 112.816 10.3307 113.307 10.992C113.803 11.6533 114.051 12.5493 114.051 13.68V18H112.611V13.68C112.611 12.848 112.456 12.24 112.147 11.856C111.838 11.472 111.31 11.28 110.563 11.28C110.035 11.28 109.55 11.3973 109.107 11.632C108.67 11.8613 108.382 12.2293 108.243 12.736L108.419 11.856V18H106.979ZM119.357 18.16C118.434 18.16 117.658 17.9707 117.029 17.592C116.399 17.2133 115.922 16.712 115.597 16.088C115.277 15.4587 115.117 14.768 115.117 14.016C115.117 13.2853 115.266 12.616 115.565 12.008C115.869 11.4 116.306 10.9147 116.877 10.552C117.453 10.184 118.146 10 118.957 10C119.607 10 120.186 10.1307 120.693 10.392C121.205 10.648 121.605 11.024 121.893 11.52C122.186 12.0107 122.333 12.608 122.333 13.312C122.333 13.424 122.327 13.5467 122.317 13.68C122.311 13.808 122.295 13.9413 122.269 14.08H116.589C116.658 14.8053 116.831 15.3707 117.109 15.776C117.386 16.1813 117.735 16.4667 118.157 16.632C118.578 16.7973 119.037 16.88 119.533 16.88C119.895 16.88 120.274 16.8427 120.669 16.768C121.063 16.6933 121.437 16.576 121.789 16.416L121.981 17.552C121.677 17.6853 121.306 17.8213 120.869 17.96C120.431 18.0933 119.927 18.16 119.357 18.16ZM116.717 13.088H120.845C120.845 12.72 120.775 12.4 120.637 12.128C120.498 11.856 120.287 11.648 120.005 11.504C119.722 11.3547 119.362 11.28 118.925 11.28C118.285 11.28 117.791 11.44 117.445 11.76C117.103 12.0747 116.861 12.5173 116.717 13.088ZM127.064 18.16C126.179 18.16 125.435 17.9813 124.832 17.624C124.235 17.2613 123.781 16.776 123.472 16.168C123.168 15.5547 123.016 14.8747 123.016 14.128C123.016 13.3493 123.163 12.648 123.456 12.024C123.755 11.4 124.211 10.9067 124.824 10.544C125.437 10.1813 126.221 10 127.176 10C127.587 10 127.973 10.0427 128.336 10.128C128.704 10.208 129.032 10.32 129.32 10.464L129.096 11.728C128.803 11.5893 128.491 11.48 128.16 11.4C127.835 11.32 127.496 11.28 127.144 11.28C126.28 11.28 125.621 11.5253 125.168 12.016C124.715 12.5067 124.488 13.1893 124.488 14.064C124.488 14.9173 124.704 15.6027 125.136 16.12C125.568 16.6373 126.227 16.896 127.112 16.896C127.475 16.896 127.821 16.8533 128.152 16.768C128.488 16.6827 128.808 16.5653 129.112 16.416L129.304 17.568C129.091 17.7173 128.779 17.8533 128.368 17.976C127.957 18.0987 127.523 18.16 127.064 18.16ZM133.114 18.16C132.618 18.16 132.22 18.0693 131.922 17.888C131.623 17.7067 131.404 17.4747 131.266 17.192C131.132 16.904 131.066 16.6027 131.066 16.288V11.28H129.722L129.85 10.16H131.066V8.224L132.506 8.08V10.16H134.57V11.28H132.506V15.408C132.506 15.9093 132.535 16.272 132.594 16.496C132.652 16.72 132.796 16.8613 133.026 16.92C133.26 16.9787 133.636 17.008 134.154 17.008H134.522L134.41 18.16H133.114ZM135.48 18V10.16H136.92V18H135.48ZM135.48 8.4V6.8H136.92V8.4H135.48ZM141.975 18.16C141.154 18.16 140.452 17.9787 139.871 17.616C139.295 17.248 138.852 16.7573 138.543 16.144C138.239 15.5253 138.087 14.8373 138.087 14.08C138.087 13.3227 138.239 12.6373 138.543 12.024C138.852 11.4053 139.295 10.9147 139.871 10.552C140.452 10.184 141.154 10 141.975 10C142.791 10 143.49 10.184 144.071 10.552C144.652 10.9147 145.095 11.4053 145.399 12.024C145.708 12.6373 145.863 13.3227 145.863 14.08C145.863 14.8373 145.708 15.5253 145.399 16.144C145.095 16.7573 144.652 17.248 144.071 17.616C143.49 17.9787 142.791 18.16 141.975 18.16ZM141.975 16.88C142.754 16.88 143.351 16.6347 143.767 16.144C144.183 15.648 144.391 14.96 144.391 14.08C144.391 13.2 144.183 12.5147 143.767 12.024C143.351 11.528 142.754 11.28 141.975 11.28C141.202 11.28 140.604 11.528 140.183 12.024C139.767 12.5147 139.559 13.2 139.559 14.08C139.559 14.96 139.767 15.648 140.183 16.144C140.604 16.6347 141.202 16.88 141.975 16.88ZM147.028 18V10.16H148.148L148.436 11.664L147.876 11.424C148.404 10.8373 148.919 10.4533 149.42 10.272C149.927 10.0907 150.42 10 150.9 10C152.047 10 152.865 10.3307 153.356 10.992C153.852 11.6533 154.1 12.5493 154.1 13.68V18H152.66V13.68C152.66 12.848 152.505 12.24 152.196 11.856C151.887 11.472 151.359 11.28 150.612 11.28C150.084 11.28 149.599 11.3973 149.156 11.632C148.719 11.8613 148.431 12.2293 148.292 12.736L148.468 11.856V18H147.028Z" fill="#02D693"/>
</svg>

        </div>
      </div>
      </PaymentForm>
    </div>
  </MainWrapperVue>
</template>
<script>
import TextInputVue from '~/components/inputs/FormInputs/TextInput.vue';
import PaymentForm from '~/components/Forms/PaymentForm.vue';
import CheckboxInputVueVue from '~/components/inputs/FormInputs/CheckboxInputVue.vue';
import DarkButtonVue from '~/components/Buttons/DarkButton.vue';
import BackButton from '~/components/Buttons/NavigationButtons/BackButton.vue';
import MainWrapperVue from '~/components/TopLevelWrappers/MainWrapper.vue';
import CreditCardVue from '~/components/Interactive/CreditCard.vue';
export default {
  setup() {
  },
  mounted(){
  },
  components:{ TextInputVue, PaymentForm, CheckboxInputVueVue, DarkButtonVue, BackButton, MainWrapperVue, CreditCardVue },
  data(){
    return {
      formModel:{
          ccName:"",
          ccNumber:"",
          ccExpiry:"",
          ccCVV:"",
          ccDefault:false,
      }
    }
  },
  methods:{
    async successHandle(){
      const storeCommit  =  this.$store.commit("user/addPayment",this.formModel);
      this.$router.push('/checkout/review')
    },
    inputHandle(data){
      let key_ = data.name.split("-")[2]
      this.formModel[key_] = data.value;
    }
  }
}
</script>
<style scoped>



</style>
